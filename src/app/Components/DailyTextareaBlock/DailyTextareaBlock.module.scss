@use "../../styles/mixins" as mixins;
@use "../../styles/typography" as typography;
@use "../../styles/variables" as variables;

.daily-textarea-block {
	display: flex;
	flex-direction: column;
	background-color: var(--color-surface);
	border-radius: variables.$radius-lg;
	border: .1rem solid var(--color-border);
	overflow: hidden;
	transition: all variables.$transition-smooth;
	box-shadow: 0 .1rem .3rem rgba(0, 0, 0, 0.05);

	&:hover {
		box-shadow: 0 .4rem 1.2rem rgba(0, 0, 0, 0.1);
		transform: translateY(-0.2rem);
	}

	&:focus-within {
		border-color: var(--color-primary);
		box-shadow: 0 .4rem 1.6rem var(--shadow-primary-sm);
		transform: translateY(-0.2rem);
	}

	&.is-today {
		.day-batch {
			background-color: var(--color-primary);
			color: var(--color-surface);
			font-weight: 700;
		}
	}

	&.is-highlighted {
		outline: .2rem solid var(--color-primary);
		outline-offset: .2rem;
	}

	.date {
		@include typography.text-base;
		display: flex;
		border-bottom: .1rem solid var(--color-border);
		padding: var(--space-md);
		gap: var(--space-sm);
		align-items: center;
	}

	.day-batch {
		color: var(--color-primary);
		padding-inline: .5rem;
		padding-block: .3rem;
		border-radius: variables.$radius-xs;
		background-color: var(--color-primary-subtle);
		font-weight: 600;
	}

	.month-and-day {
		color: var(--color-text-muted);
	}

	.editor-container {
		cursor: text;
		min-height: 12.5rem;
		display: flex;
		flex-direction: column;
	}

	.editor-container > * {
		flex: 1 1 auto;
		min-height: 0;
	}

	.editor-loading {
		min-height: 12.5rem;
		display: flex;
		padding: var(--space-md);
	}

	.editor-skeleton {
		width: 100%;
		display: flex;
		flex-direction: column;
		gap: var(--space-sm);
	}

	.editor-skeleton-line {
		display: block;
		height: 0.9rem;
		border-radius: variables.$radius-xs;
		background:
			linear-gradient(
				90deg,
				var(--color-surface-elevated) 0%,
				var(--color-border-light) 50%,
				var(--color-surface-elevated) 100%
			);
		background-size: 220% 100%;
		animation: skeleton-shimmer 1.2s ease-in-out infinite;
	}

	.editor-skeleton-line:nth-child(1) {
		width: 92%;
	}

	.editor-skeleton-line:nth-child(2) {
		width: 86%;
	}

	.editor-skeleton-line:nth-child(3) {
		width: 95%;
	}

	.editor-skeleton-line:nth-child(4) {
		width: 78%;
	}

	.editor-skeleton-line:nth-child(5) {
		width: 88%;
	}

	.textarea {
		@include typography.text-base;
		min-height: 12.5rem;
		resize: vertical;
		padding: var(--space-md);
		margin: var(--space-md);
		border: 1px solid var(--color-border);
		border-radius: 0.3rem;

		&:focus-visible {
			outline: .1rem solid var(--color-primary);
		}

		&::placeholder {
			color: var(--color-text-placeholder);
		}
	}

	@include mixins.tablet {
		.editor-container {
			min-height: 25rem;
		}

		.editor-loading {
			min-height: 25rem;
			padding: var(--space-lg);
		}

		.textarea {
			min-height: 25rem;
		}
	}

	@media (max-width: 639px) {
		&:hover {
			box-shadow: 0 .1rem .3rem rgba(0, 0, 0, 0.05);
			transform: none;
		}

		&:focus-within {
			transform: none;
		}

		.date {
			padding: var(--space-sm);
		}

		.editor-container {
			min-height: 16rem;
		}

		.editor-loading {
			padding: var(--space-sm);
		}
	}
}

@keyframes skeleton-shimmer {
	0% {
		background-position: 100% 0;
	}
	100% {
		background-position: -100% 0;
	}
}
